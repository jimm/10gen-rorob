== About Ruby on Rails on Babble

This is a sample Rails application that runs on 10gen's Babble app server and
uses their Mongo object-oriented database.


== How To Babble-ify Your Rails App

1. Freeze Rails.

        % rake rails:freeze:gems

   This puts a copy of Rails inside your application, in the vendor/rails
   directory.

2. Create the file _init.rb in the root directory of your Rails app:

        # Look for the requested URI in the public directory. If not found,
        # pass it on to the 10gen Rails dispatcher.
        $mapUrlToJxpFile = Proc.new do |uri, req|
          uri = '/index.html' if uri == '/'
          if File.exist?(File.join($local.getRoot.getPath, 'public', uri[1..-1]))
            "/public" + uri
          else
            "public/xgen_dispatch.rb"
          end
        end

3. Create the file public/xgen_dispatch.rb:

        require 'xgen/rails'
        load 'xgen/rails/cgi_env.rb'
        Dispatcher.dispatch

4. Use XGen::Mongo::Base instead of ActiveRecord::Base

        class Course < XGen::Mongo::Base

          # Declare Mongo collection name and ivars to be saved
          collection_name :courses
          field :name

          def to_s
            "Course #{name}"
          end
        end


== How To Run Your Rails App

Download the 10gen SDK (http://www.10gen.com/wiki/SDK), then see the Quick
Start guide (http://www.10gen.com/wiki/SDK.QuickStart).

# Local Variables:
# mode: rdoc
# End:
